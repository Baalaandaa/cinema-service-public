(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t,a){"use strict";a.r(t);a(69),a(94);var n=a(0),i=a.n(n),r=a(41),l=a.n(r),o=a(25),c=a.n(o),s=a(7),u=a(8),m=a(10),d=a(9),h=a(11),p=a(1),f=(a(115),a(31)),b=a.n(f),v=a(65),g=a.n(v),E=a(26),k=a(66),y=a.n(k),j=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("span",{style:{padding:"2px 10px",borderRadius:15,backgroundColor:"white",position:"absolute",right:"20%",top:"2%",fontWeight:"bold",fontSize:14}},this.props.rating)}}]),t}(i.a.Component),O={flexShrink:0,width:130,height:"auto",flexDirection:"column",alignItems:"center",fontSize:16,paddingLeft:4},w={width:110,height:150,borderRadius:15},C={width:100,marginTop:0,marginBottom:0,padding:3,overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},x=function(e){var t=e.id,a=e.openFilm,n=e.activePreview,r=e.go,l=e.futurePreview;e.setid;return i.a.createElement(p.Panel,{id:t},i.a.createElement(p.PanelHeader,null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),i.a.createElement(p.Gallery,{slideWidth:"100%",style:{height:150,borderRadius:10,marginLeft:15,marginRight:15,marginTop:15,marginBottom:15},bullets:"dark",autoplay:3e3},i.a.createElement(p.Link,{onClick:r,"data-to":"popular"},i.a.createElement("img",{style:{height:150,width:"100%"},src:y.a}))),i.a.createElement(p.Group,{style:{paddingBottom:8}},i.a.createElement(p.Header,{level:"2",aside:i.a.createElement(p.Link,{"data-to":"active",onClick:r},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435")},"\u0421\u0435\u0439\u0447\u0430\u0441 \u0432 \u043a\u0438\u043d\u043e"),i.a.createElement(p.HorizontalScroll,null,i.a.createElement("div",{style:{display:"flex"}},n&&n.map(function(e,t){return i.a.createElement(p.Link,{onClick:a,"data-fid":e.tmdbId,"data-to":"film",key:t,style:Object(E.a)({},O)},i.a.createElement("div",{style:{position:"relative"}},e.tmdbFullData.vote_average&&i.a.createElement(j,{rating:e.tmdbFullData.vote_average}),i.a.createElement("img",{src:e.image,size:64,style:Object(E.a)({},w,{marginBottom:8})})),i.a.createElement("p",{style:C},e.title))})))),i.a.createElement(p.Group,{style:{paddingBottom:8}},i.a.createElement(p.Header,{level:"2",aside:i.a.createElement(p.Link,{"data-to":"future",onClick:r},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435")},"\u0421\u043a\u043e\u0440\u043e \u0432 \u043a\u0438\u043d\u043e"),i.a.createElement(p.HorizontalScroll,null,i.a.createElement("div",{style:{display:"flex"}},l&&l.map(function(e,t){return i.a.createElement(p.Link,{onClick:a,"data-fid":e.tmdbId,"data-to":"film",key:t,style:Object(E.a)({},O)},i.a.createElement("div",{style:{display:"relative"}},i.a.createElement("img",{src:e.image,size:64,style:Object(E.a)({},w,{marginBottom:8})})),i.a.createElement("p",{style:C},e.title))})))))},P=a(16),S=a.n(P),F=a(14),I=a.n(F),L=Object(p.platform)(),T=function(e){var t=e.id,a=e.go;return i.a.createElement(p.Panel,{id:t},i.a.createElement(p.PanelHeader,{left:i.a.createElement(p.HeaderButton,{onClick:a,"data-to":"home"},L===p.IOS?i.a.createElement(S.a,null):i.a.createElement(I.a,null))},"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0435"))},D={image_url:"https://image.tmdb.org/t/p/original",server_url:"https://cinema.voloshinskii.ru"},R=function(e){function t(e){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).call(this,e))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{style:{position:"relative"}},"https://image.tmdb.org/t/p/originalnull"==this.props.back&&i.a.createElement("img",{src:"https://image.tmdb.org/t/p/original/pKDVywMKjM7TeU739z7cR9wu9Sf.jpg",style:{width:"100%",filter:"blur(15px)"}}),i.a.createElement("img",{src:this.props.back,style:{width:"100%",filter:"blur(2.2px)"}}),i.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"98%",backgroundColor:"rgba(0, 0, 0, 0.40)"}},i.a.createElement("img",{src:this.props.front,style:{width:"27%",position:"absolute",bottom:"-5%",left:"8%",borderRadius:10,boxShadow:"0 12px 30px 0 rgba(35,39,42,.4)",zIndex:1e3}}),i.a.createElement("span",{style:{position:"absolute",top:"40%",left:"40%",color:"white",fontWeight:"bold",fontSize:19}},this.props.title)))}}]),t}(i.a.Component),B=a(6),H=a(67),z=a.n(H),_=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={expanded:!1},a.expand=a.expand.bind(Object(B.a)(Object(B.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"expand",value:function(){var e=!this.state.expanded;this.setState({expanded:e}),console.log(this.state.expanded)}},{key:"render",value:function(){return i.a.createElement(z.a,{line:this.state.expanded?9999999999:4,truncateText:this.state.expanded?"":"...",text:this.props.text,textTruncateChild:i.a.createElement("a",{style:{color:"#528bcc"},onClick:this.expand},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435")})}}]),t}(i.a.Component),W=(a(116),Object(p.platform)());var V=function(e){var t=e.authToken,a=e.id,n=e.go,r=e.currentFilm;return i.a.createElement(p.Panel,{id:a,theme:"white"},i.a.createElement(p.PanelHeader,{left:i.a.createElement(p.HeaderButton,{onClick:n,"data-to":"home"},W===p.IOS?i.a.createElement(S.a,null):i.a.createElement(I.a,null))},r&&r.title),r&&i.a.createElement(R,{back:D.image_url+r.tmdbFullData.backdrop_path,front:r.image,title:r.title}),i.a.createElement(p.Group,{style:{marginTop:0,overflow:"auto"}},i.a.createElement(p.Div,null,r&&r.tmdbFullData.vote_average>0&&i.a.createElement(p.InfoRow,{style:{display:"inline-block"},title:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"},i.a.createElement("span",{style:{color:"#528bcc",fontWeight:"bold",fontSize:20}},r.tmdbFullData.vote_average)),r&&r.tmdbFullData.runtime>0&&i.a.createElement(p.InfoRow,{style:{display:"inline-block",float:"right"},title:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},i.a.createElement("span",{style:{color:"grey",fontWeight:"bold",fontSize:20}},r.tmdbFullData.runtime," \u043c\u0438\u043d")))),i.a.createElement(p.Div,null,r&&r.tmdbFullData.overview&&i.a.createElement(_,{text:r.tmdbFullData.overview})),i.a.createElement(p.Group,null,i.a.createElement(p.Div,null,r&&r.tmdbFullData.budget>0&&i.a.createElement(p.InfoRow,{title:"\u041e\u0431\u0449\u0438\u0439 \u0431\u044e\u0434\u0436\u0435\u0442"},r.tmdbFullData.budget,"$"))),i.a.createElement(p.Button,{size:"xl",style:{width:"90%",margin:"auto"},level:"secondary",onClick:function(){var e,a;e=t,a=r._id,fetch("https://cinema.voloshinskii.ru/watch?token=".concat(e,"&filmId=").concat(a)).then(function(e){return e.json()})}},"\u0418\u0434\u0443 \u043d\u0430 \u0444\u0438\u043b\u044c\u043c"))},G=Object(p.platform)(),A=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={search:"",futureList:[]},a.onChange=a.onChange.bind(Object(B.a)(Object(B.a)(a))),a.searchRes=a.searchRes.bind(Object(B.a)(Object(B.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"onChange",value:function(e){this.setState({search:e})}},{key:"searchRes",value:function(){var e=this.state.search.toLowerCase();return this.state.futureList.filter(function(t){return t.title.toLowerCase().indexOf(e)>-1})}},{key:"componentDidMount",value:function(){var e=this;fetch("https://cinema.voloshinskii.ru/future/preview?limit=10000").then(function(e){return e.json()}).then(function(t){return e.setState({futureList:t})})}},{key:"render",value:function(){var e=this;return i.a.createElement(p.Panel,{id:this.props.id},i.a.createElement(p.PanelHeader,{left:i.a.createElement(p.HeaderButton,{onClick:this.props.go,"data-to":"home"},G===p.IOS?i.a.createElement(S.a,null):i.a.createElement(I.a,null))},"\u0421\u043a\u043e\u0440\u043e \u0432 \u043a\u0438\u043d\u043e"),i.a.createElement(p.Search,{value:this.state.search,onChange:this.onChange}),this.state.futureList.length>0&&i.a.createElement(p.List,null,this.searchRes().map(function(t){return i.a.createElement(p.Cell,{"data-fid":t.tmdbId,key:t.tmdbId,onClick:e.props.openFilm},t.title)})))}}]),t}(i.a.Component),K=Object(p.platform)(),M=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={search:"",activeList:[]},a.onChange=a.onChange.bind(Object(B.a)(Object(B.a)(a))),a.searchRes=a.searchRes.bind(Object(B.a)(Object(B.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"onChange",value:function(e){this.setState({search:e})}},{key:"searchRes",value:function(){var e=this.state.search.toLowerCase();return this.state.activeList.filter(function(t){return t.title.toLowerCase().indexOf(e)>-1})}},{key:"componentDidMount",value:function(){var e=this;fetch("https://cinema.voloshinskii.ru/active/preview?limit=10000").then(function(e){return e.json()}).then(function(t){return e.setState({activeList:t})})}},{key:"render",value:function(){var e=this;return i.a.createElement(p.Panel,{id:this.props.id},i.a.createElement(p.PanelHeader,{left:i.a.createElement(p.HeaderButton,{onClick:this.props.go,"data-to":"home"},K===p.IOS?i.a.createElement(S.a,null):i.a.createElement(I.a,null))},"\u0421\u0435\u0439\u0447\u0430\u0441 \u0432 \u043a\u0438\u043d\u043e"),i.a.createElement(p.Search,{value:this.state.search,onChange:this.onChange}),this.state.activeList.length>0&&i.a.createElement(p.List,null,this.searchRes().map(function(t){return i.a.createElement(p.Cell,{"data-fid":t.tmdbId,key:t.tmdbId,onClick:e.props.openFilm},t.title)})))}}]),t}(i.a.Component),J=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).go=function(e){a.setState({activePanel:e.currentTarget.dataset.to})},a.onStoryChange=function(e){a.setState({activePanel:e.currentTarget.dataset.story})},a.openFilm=function(e){a.setState({activePanel:"film",filmid:e.currentTarget.dataset.fid}),fetch("https://cinema.voloshinskii.ru/film/gettmdb/".concat(e.currentTarget.dataset.fid)).then(function(e){return e.json()}).then(function(e){return a.setState({currentFilm:e})})},a.state={activePanel:"home",activePreview:null,futurePreview:null,currentFilm:null,authToken:null},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;c.a.subscribe(function(t){switch(t.detail.type){case"VKWebAppAccessTokenReceived":e.setState({authToken:t.detail.data.access_token}),console.log(t.detail.data.access_token);break;default:console.log(t.detail.type)}}),c.a.send("VKWebAppGetAuthToken",{app_id:6977050,scope:"friends"}),fetch("https://cinema.voloshinskii.ru/active/preview").then(function(e){return e.json()}).then(function(t){return e.setState({activePreview:t})}),fetch("https://cinema.voloshinskii.ru/future/preview").then(function(e){return e.json()}).then(function(t){return e.setState({futurePreview:t})})}},{key:"render",value:function(){return i.a.createElement(p.Epic,{activeStory:this.state.activePanel,tabbar:"home"===this.state.activePanel&&i.a.createElement(p.Tabbar,null,i.a.createElement(p.TabbarItem,{onClick:this.onStoryChange,selected:"home"===this.state.activePanel,"data-story":"home",text:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"},i.a.createElement(g.a,null)),i.a.createElement(p.TabbarItem,{onClick:this.onStoryChange,selected:"featured"===this.state.activePanel,"data-story":"featured",text:"\u0418\u0434\u0443"},i.a.createElement(b.a,null)),i.a.createElement(p.TabbarItem,{onClick:this.onStoryChange,selected:"featured"===this.state.activePanel,"data-story":"featured",text:"\u0418\u0434\u0443"},i.a.createElement(b.a,null)),i.a.createElement(p.TabbarItem,{onClick:this.onStoryChange,selected:"featured"===this.state.activePanel,"data-story":"featured",text:"\u0418\u0434\u0443"},i.a.createElement(b.a,null)))},i.a.createElement(p.View,{id:"home",activePanel:"home"},i.a.createElement(x,{id:"home",activePreview:this.state.activePreview,futurePreview:this.state.futurePreview,go:this.go,openFilm:this.openFilm,setid:this.setid})),i.a.createElement(p.View,{id:"popular",activePanel:"popular"},i.a.createElement(T,{id:"popular",go:this.go})),i.a.createElement(p.View,{id:"film",activePanel:"film"},i.a.createElement(V,{authToken:this.state.authToken,currentFilm:this.state.currentFilm,id:"film",go:this.go})),i.a.createElement(p.View,{id:"future",activePanel:"future"},i.a.createElement(A,{id:"future",go:this.go,openFilm:this.openFilm})),i.a.createElement(p.View,{id:"active",activePanel:"active"},i.a.createElement(M,{id:"active",go:this.go,openFilm:this.openFilm})))}}]),t}(i.a.Component);c.a.send("VKWebAppInit",{}),l.a.render(i.a.createElement(J,null),document.getElementById("root"))},66:function(e,t,a){e.exports=a.p+"static/media/banner-1.be3b55c6.png"},68:function(e,t,a){e.exports=a(117)}},[[68,1,2]]]);
//# sourceMappingURL=main.0c20d498.chunk.js.map